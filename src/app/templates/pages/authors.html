<custom-header *ngIf="title" [title]="title"></custom-header>
<ion-content fullscreen>
    <ion-list lines="none">
        <ion-virtual-scroll [items]="authorPrototype">
            <ion-card class="ion-no-padding ion-margin" *virtualItem="let author">
                <ion-grid class="ion-no-padding ion-margin">
                    <ion-row class="ion-justify-content-between">
                        <ion-col class="ion-no-padding ion-no-margin" size-sm="6" size-md="5" size-lg="4">
                            <h1 class="ion-no-padding ion-no-margin"><strong>{{ author.name }}</strong></h1>
                        </ion-col>
                        <ion-col class="ion-no-padding ion-no-margin ion-text-center ion-align-self-end" size-sm="6"
                                 size-md="7" size-lg="8">
                            <div class="badges-container">
                        <span class="badges-item"
                              *ngFor="let termIndex of getTermIndexesForEachAuthor(author)">
                            <ion-badge color="light">
                                {{ termIndex.term + ': ' + termIndex.highlights.length }}
                            </ion-badge>
                            &nbsp;
                        </span>
                            </div>
                        </ion-col>
                    </ion-row>
                    <hr color="tertiary">
                    <ion-row class="ion-no-padding ion-no-margin">
                        <ion-col class="ion-no-padding ion-no-margin" size-sm="6" size-md="5" size-lg="4">
                            <ion-row>
                                <ion-grid>
                                    <ion-row *ngIf="author.latestCountry">
                                        <ion-col><strong>{{ author.latestCountry }}</strong> based</ion-col>
                                    </ion-row>
                                    <ion-row *ngIf="author.latestInstitution">
                                        <ion-col> From <strong>{{ author.latestInstitution }}</strong></ion-col>
                                    </ion-row>
                                    <ion-row *ngIf="author.npapers">
                                        <ion-col><strong>{{ author.npapers }}</strong> total publications</ion-col>
                                    </ion-row>
                                    <ion-row *ngIf="author.lastAuthorCount">
                                        <ion-col><strong>{{ author.lastAuthorCount }}</strong> times as last author
                                        </ion-col>
                                    </ion-row>
                                    <ion-row *ngIf="author.firstAuthorCount">
                                        <ion-col><strong>{{ author.firstAuthorCount }}</strong> times as first author
                                        </ion-col>
                                    </ion-row>
                                </ion-grid>
                            </ion-row>
                        </ion-col>
                        <ion-col class="ion-no-padding ion-no-margin" size-sm="6" size-md="7" size-lg="8">
                            <ion-row class="paper-details">
                                <h3>Publications</h3>
                                <hr color="medium">
                                <div *ngFor="let paper of getPapersForEachAuthor(author)">
                                    <ion-item *ngIf="paper.title" (click)="openPublication(paper.link)">
                                        <p class="link">{{ paper.title }}</p>
                                    </ion-item>
                                </div>
                            </ion-row>
                        </ion-col>
                    </ion-row>
                </ion-grid>
            </ion-card>
        </ion-virtual-scroll>
    </ion-list>
</ion-content>